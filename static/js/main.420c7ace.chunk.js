(this.webpackJsonpjunqi=this.webpackJsonpjunqi||[]).push([[0],[,,function(t,e,n){"use strict";n.d(e,"f",(function(){return v})),n.d(e,"d",(function(){return C})),n.d(e,"e",(function(){return p})),n.d(e,"c",(function(){return y})),n.d(e,"a",(function(){return x})),n.d(e,"b",(function(){return w})),n.d(e,"j",(function(){return E})),n.d(e,"h",(function(){return D})),n.d(e,"i",(function(){return W})),n.d(e,"g",(function(){return F})),n.d(e,"l",(function(){return q})),n.d(e,"k",(function(){return z})),n.d(e,"m",(function(){return V})),n.d(e,"n",(function(){return K}));for(var a,c,s,r,i,o,l,d=n(16),u=n(13),h=n(17),b=n(1),v={ORANGE:"O",BLUE:"B",GREEN:"G",PURPLE:"P",CENTER:"C"},f=v.ORANGE,j=v.BLUE,m=v.GREEN,k=v.PURPLE,O=v.CENTER,C=(a={},Object(b.a)(a,v.ORANGE,v.GREEN),Object(b.a)(a,v.BLUE,v.PURPLE),Object(b.a)(a,v.GREEN,v.ORANGE),Object(b.a)(a,v.PURPLE,v.BLUE),a),p=(c={},Object(b.a)(c,v.ORANGE,v.BLUE),Object(b.a)(c,v.BLUE,v.GREEN),Object(b.a)(c,v.GREEN,v.PURPLE),Object(b.a)(c,v.PURPLE,v.ORANGE),c),y=(s={},Object(b.a)(s,v.ORANGE,v.PURPLE),Object(b.a)(s,v.BLUE,v.ORANGE),Object(b.a)(s,v.GREEN,v.BLUE),Object(b.a)(s,v.PURPLE,v.GREEN),s),x={NORMAL:"normal",CAMP:"camp",BASE:"base",CENTER:"center"},g=(r={},Object(b.a)(r,f,j),Object(b.a)(r,j,m),Object(b.a)(r,m,k),Object(b.a)(r,k,f),r),M=(i={},Object(b.a)(i,f,[6,7,8]),Object(b.a)(i,j,[0,3,6]),Object(b.a)(i,m,[2,1,0]),Object(b.a)(i,k,[8,5,2]),i),w=(o={},Object(b.a)(o,f,["".concat(O,"0"),"".concat(O,"1"),"".concat(O,"2"),"".concat(O,"3"),"".concat(O,"4"),"".concat(O,"5"),"".concat(O,"6"),"".concat(O,"7"),"".concat(O,"8")]),Object(b.a)(o,j,["".concat(O,"2"),"".concat(O,"5"),"".concat(O,"8"),"".concat(O,"1"),"".concat(O,"4"),"".concat(O,"7"),"".concat(O,"0"),"".concat(O,"3"),"".concat(O,"6")]),Object(b.a)(o,m,["".concat(O,"8"),"".concat(O,"7"),"".concat(O,"6"),"".concat(O,"5"),"".concat(O,"4"),"".concat(O,"3"),"".concat(O,"2"),"".concat(O,"1"),"".concat(O,"0")]),Object(b.a)(o,k,["".concat(O,"6"),"".concat(O,"3"),"".concat(O,"0"),"".concat(O,"7"),"".concat(O,"4"),"".concat(O,"1"),"".concat(O,"8"),"".concat(O,"5"),"".concat(O,"2")]),o),S=[0,1,1,1,2,2,2,3,3,3,4,4,5,5,6,6,7,7,8,9,10,10,100,100,100],I=(Array.from(Array(20).keys(),(function(t){return t+5})),function(t,e,n){return{id:t,type:e,isOnRailroad:n}}),E=function(t){if(t[0]===v.CENTER)return x.CENTER;var e=parseInt(t[1]),n=parseInt(t[2]);return(1===e||3===e)&&(1===n||3===n)||2===e&&2===n?x.CAMP:5!==e||1!==n&&3!==n?x.NORMAL:x.BASE},R={},P={},N=[],H=function(t,e){null==P[t]&&(P[t]=new Set),P[t].add(e),null==P[e]&&(P[e]=new Set),P[e].add(t)},B=0;B<3;B++)for(var T=0;T<3;T++){var A=3*B+T,L="".concat(O).concat(A),G=I(L,x.CENTER,!0);R[L]=G,B>0&&H(L,"".concat(O).concat(A-3)),B<2&&H(L,"".concat(O).concat(A+3)),T>0&&H(L,"".concat(O).concat(A-1)),T<2&&H(L,"".concat(O).concat(A+1))}[f,j,m,k].forEach((function(t){for(var e=0;e<6;e++)for(var n=function(n){var a="".concat(t).concat(e).concat(n),c=E(a),s=I(a,c,0===e||4===e||(0===n||4===n)&&5!==e);R[a]=s,e>0&&H(a,"".concat(t).concat(e-1).concat(n)),e<5&&H(a,"".concat(t).concat(e+1).concat(n)),n>0&&H(a,"".concat(t).concat(e).concat(n-1)),n<4&&H(a,"".concat(t).concat(e).concat(n+1)),c===x.CAMP&&[[e-1,n-1],[e-1,n+1],[e+1,n-1],[e+1,n+1]].forEach((function(e){var n=Object(u.a)(e,2),c=n[0],s=n[1];return H(a,"".concat(t).concat(c).concat(s))})),0===e&&(0===n?(H(a,"".concat(O).concat(M[t][0])),H(a,"".concat(g[t],"04"))):2===n?H(a,"".concat(O).concat(M[t][1])):4===n&&H(a,"".concat(O).concat(M[t][2])))},a=0;a<5;a++)n(a)}));var U=(l={},Object(b.a)(l,f,["".concat(O,"6"),"".concat(O,"3"),"".concat(O,"0")]),Object(b.a)(l,j,["".concat(O,"0"),"".concat(O,"1"),"".concat(O,"2")]),Object(b.a)(l,m,["".concat(O,"2"),"".concat(O,"5"),"".concat(O,"8")]),Object(b.a)(l,k,["".concat(O,"8"),"".concat(O,"7"),"".concat(O,"6")]),l);[f,j,m,k].forEach((function(t){var e=[],n=[];[0,4].forEach((function(a){var c=[];4===a&&e.push.apply(e,Object(h.a)(U[t]));for(var s=0;s<5;s++){c.push("".concat(t).concat(a).concat(s));var r=0===a?4-s:s,i=0===a?t:C[t],o=0===a?t:g[t];e.push("".concat(i).concat(r).concat(a)),n.push("".concat(o).concat(r).concat(a))}N.push(c)})),N.push(e,n)})),N.push(["".concat(f,"02"),"".concat(O,"7"),"".concat(O,"4"),"".concat(O,"1"),"".concat(m,"02")],["".concat(j,"02"),"".concat(O,"3"),"".concat(O,"4"),"".concat(O,"5"),"".concat(k,"02")]);var D=function(t){return new Set(P[t])},W=function(t){return Object.assign({},R[t])},F=function(t){var e={};[f,j,m,k].forEach((function(n){for(var a=0,c=t[n],s=0;s<6;s++)for(var r=0;r<5;r++){var i="".concat(n).concat(s).concat(r);c&&E(i)!==x.CAMP?(e[i]="".concat(n).concat(c[a]),a++):e[i]=null}}));for(var n=0;n<9;n++)e["".concat(O).concat(n)]=null;return e},J={};[f,j,m,k].forEach((function(t){S.forEach((function(e){J["".concat(t).concat(e)]=e}))}));var q=function(t){return J[t]},z=function(t){return null!=t?t[0]:null},V=function(t,e,n){var a=W(t),c=W(e);if(!a.isOnRailroad||!c.isOnRailroad)return null;for(var s=new Map,r=[t],i=new Set([t]);r.length;){var o,l=r.shift(),u=D(l),h=Object(d.a)(u);try{for(h.s();!(o=h.n()).done;){var b=o.value;if(b===e){s.set(b,l);for(var v=[],f=e;null!=f;)v.unshift(f),f=s.get(f);return v}var j=W(b);null==n[b]&&j.isOnRailroad&&!i.has(b)&&(i.add(b),r.push(b),s.set(b,l))}}catch(m){h.e(m)}finally{h.f()}}return null},K=function(t,e,n,a){var c=a[t],s=a[e];if(null==c||n!==z(c)||t===e)return!1;var r=W(t),i=q(c),o=W(e);if(r.type===x.BASE||100===i)return!1;if(s&&(z(s)===n||z(s)===C[n]))return!1;if(o.type===x.CAMP&&null!=s)return!1;if(r.isOnRailroad&&o.isOnRailroad){if(1===i)return null!=V(t,e,a);var l=N.find((function(n){return n.includes(t)&&n.includes(e)}));if(!l)return!1;for(var d=l.findIndex((function(e){return e===t})),u=l.findIndex((function(t){return t===e})),h=Math.min(d,u),b=Math.max(d,u),v=h+1;v<b;v++)if(null!=a[l[v]])return!1;return!0}return D(t).has(e)}},,,,,,,,,,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var a,c=n(6),s=n(7),r=n(9),i=n(8),o=n(1),l=n(3),d=n.n(l),u=(n(19),n(2)),h=n(0),b={0:"\ud83d\udea9",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"\ud83d\udca3",100:"Mine"},v=(a={},Object(o.a)(a,u.f.ORANGE,"orange"),Object(o.a)(a,u.f.BLUE,"blue"),Object(o.a)(a,u.f.GREEN,"green"),Object(o.a)(a,u.f.PURPLE,"purple"),a),f=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(t){return Object(c.a)(this,n),e.call(this,t)}return Object(s.a)(n,[{key:"render",value:function(){var t,e,n,a=this.props.pieceId;return a?(t=Object(u.k)(a),e=Object(u.l)(a),n="piece ".concat(v[t])):n="piece",this.props.isPieceHoverable&&(n+=" hoverable-piece"),this.props.isSelected&&(n+=" selected"),this.props.isLastDest&&(n+=" last-dest"),n+=" en",Object(h.jsxs)("div",{className:n,children:[null!=e&&b[e],this.props.children]})}}]),n}(d.a.PureComponent)},,,,function(t,e,n){},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return x}));var a=n(13),c=n(4),s=n(1),r=n(6),i=n(7),o=n(5),l=n(9),d=n(8),u=n(3),h=n.n(u),b=(n(32),n(21)),v=n(22),f=n(23),j=n(41),m=n(15),k=n(2),O=n(0),C=834,p="rgb(104,144,176)",y="rgb(200,236,240)",x=function(e){Object(l.a)(h,e);var n=Object(d.a)(h);function h(t){var e;Object(r.a)(this,h),(e=n.call(this,t)).isCellPieceSelectable=function(t){var n=e.state.boardStates[t];return Object(k.j)(t)!==k.a.BASE&&n&&100!==Object(k.l)(n)&&e.isOwnPiece(n)&&e.state.currentTurnColor===e.state.ownColor};var a=[9,1,6,3,3,5,6,7,8,1,7,10,4,2,3,5,1,2,100,10,2,100,100,0,4],c=[k.f.ORANGE,k.f.BLUE,k.f.GREEN,k.f.PURPLE][Math.floor(4*Math.random())],i=Object(k.g)(Object(s.a)({},c,a));return e.state={boardStates:i,playerId:null,ownColor:c,currentTurnColor:null,lastMovePath:[],roadsDrawn:!1,selectedCellId:null,isConnected:!1,formation:a,moveHistoryIdx:-1,moveHistory:[],markStates:{},markMenuCellId:null,ws:null,winners:null},e.board=null,e.canvas=null,e.arrowCanvas=null,e.markMenu=null,e.setBoardRef=function(t){e.board=t},e.setCanvasRef=function(t){e.canvas=t},e.setArrowCanvasRef=function(t){e.arrowCanvas=t},e.setMarkMenuRef=function(t){e.markMenu=t},e.cellClicked=e.cellClicked.bind(Object(o.a)(e)),e.drawRoads=e.drawRoads.bind(Object(o.a)(e)),e.joinGame=e.joinGame.bind(Object(o.a)(e)),e.surrender=e.surrender.bind(Object(o.a)(e)),e.prevClicked=e.prevClicked.bind(Object(o.a)(e)),e.nextClicked=e.nextClicked.bind(Object(o.a)(e)),e.backToBeginningClicked=e.backToBeginningClicked.bind(Object(o.a)(e)),e.backToCurrentGameClicked=e.backToCurrentGameClicked.bind(Object(o.a)(e)),e.markClicked=e.markClicked.bind(Object(o.a)(e)),e.openMarkMenu=e.openMarkMenu.bind(Object(o.a)(e)),e.closeMarkMenu=e.closeMarkMenu.bind(Object(o.a)(e)),e}return Object(i.a)(h,[{key:"cellClicked",value:function(t){if(this.isCellClickable(t))if(this.state.selectedCellId){var e=this.state.selectedCellId;if(this.state.isConnected){if(t===e)return void this.setState({selectedCellId:null});if(this.isOwnPiece(this.state.boardStates[t]))return void this.setState({selectedCellId:t});this.state.ws.send(JSON.stringify({type:"move",data:{srcCellId:e,destCellId:t}}))}else{var n,a=this.state.boardStates[e],r=Object(c.a)(Object(c.a)({},this.state.boardStates),{},(n={},Object(s.a)(n,e,this.state.boardStates[t]),Object(s.a)(n,t,a),n));this.setState({selectedCellId:null,boardStates:r})}}else this.setState({selectedCellId:t})}},{key:"isOwnPiece",value:function(t){return t&&Object(k.k)(t)===this.state.ownColor}},{key:"isPieceHoverable",value:function(t,e){return null!=t&&(!(this.state.isConnected&&(!this.isOwnPiece(t)||this.state.currentTurnColor!==this.state.ownColor||this.state.moveHistoryIdx!==this.state.moveHistory.length-1))&&(null==this.state.selectedCellId||this.state.selectedCellId===e))}},{key:"isCellClickable",value:function(t){if(this.state.selectedCellId){if(this.state.isConnected){var e=this.state.selectedCellId;return t===e||(this.isOwnPiece(this.state.boardStates[t])?this.isCellPieceSelectable(t):Object(k.n)(e,t,this.state.currentTurnColor,this.state.boardStates))}var n=this.state.selectedCellId,a=Object(k.j)(t);if(t===n)return!0;if(a===k.a.CAMP)return!1;if(null==this.state.boardStates[t])return!1;var c=parseInt(n[1]),s=parseInt(t[1]),r=Object(k.l)(this.state.boardStates[n]),i=Object(k.l)(this.state.boardStates[t]);return!(10===r&&0===s||10===i&&0===c)&&(!(100===r&&s<4||100===i&&c<4)&&!(0===r&&a!==k.a.BASE||0===i&&Object(k.j)(n)!==k.a.BASE))}return this.state.moveHistoryIdx===this.state.moveHistory.length-1&&(this.state.isConnected?this.isCellPieceSelectable(t):null!=this.state.boardStates[t])}},{key:"hasMarkMenu",value:function(t){var e=this.state.boardStates[t];return null!=e&&Object(k.k)(e)!==this.state.ownColor&&null==Object(k.l)(e)}},{key:"openMarkMenu",value:function(e){var n=this;if(this.hasMarkMenu(e)){var a=document.getElementById(e).getBoundingClientRect(),c=(a.left+a.right)/2,s=(a.top+a.bottom)/2;this.markMenu.style.left="".concat(c,"px"),this.markMenu.style.top="".concat(s,"px"),t((function(){return n.setState({markMenuCellId:e})}))}}},{key:"closeMarkMenu",value:function(){this.setState({markMenuCellId:null})}},{key:"markClicked",value:function(t){this.setState({markStates:Object(c.a)(Object(c.a)({},this.state.markStates),{},Object(s.a)({},this.state.markMenuCellId,t)),markMenuCellId:null})}},{key:"getMarkStatesAfterMove",value:function(t,e){if(t){var n,a,c=t.srcCellId,r=t.destCellId,i=t.destCellBefore,o=t.destCellAfter;return e?(n={},Object(s.a)(n,c,i===o?null:null!=o?this.state.markStates[r]:null),Object(s.a)(n,r,i===o?this.state.markStates[r]:null),n):(a={},Object(s.a)(a,c,null),Object(s.a)(a,r,i===o?this.state.markStates[r]:null!=o?this.state.markStates[c]:null),a)}return{}}},{key:"getMovePath",value:function(t,e){if(!e)return[];var n=e.srcCellId,a=e.destCellId,c=Object(k.i)(n),s=Object(k.i)(a);return c.isOnRailroad&&s.isOnRailroad?Object(k.m)(n,a,t):[n,a]}},{key:"isSelected",value:function(t){return this.state.selectedCellId&&this.state.selectedCellId===t}},{key:"isLastDest",value:function(t){return this.state.lastMovePath.length&&this.state.lastMovePath[this.state.lastMovePath.length-1]===t}},{key:"createRenderedCell",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.state.boardStates[t],a=this.state.markStates[t],s=null;null==Object(k.l)(n)&&a&&(s=Object(O.jsx)("div",Object(c.a)(Object(c.a)({className:"mark"},e),{},{children:a})));var r=null;null!=n&&(r=Object(O.jsx)(m.a,{pieceId:n,isSelected:this.isSelected(t),isLastDest:this.isLastDest(t),isPieceHoverable:this.isPieceHoverable(n,t),children:s}));var i=null;return null==n&&this.isLastDest(t)&&(i=Object(O.jsx)("div",{className:"piece empty-piece last-dest"})),Object(O.jsx)(b.a,{cellId:t,isCellClickable:this.isCellClickable(t),cellClicked:this.cellClicked,openMarkMenu:this.openMarkMenu,children:r||i},t)}},{key:"renderTopCells",value:function(){for(var t=[],e=5;e>=0;e--)for(var n=4;n>=0;n--){var a="".concat(k.d[this.state.ownColor]).concat(e).concat(n),c=this.createRenderedCell(a);t.push(c)}return Object(O.jsx)("div",{className:"player-territory top-territory",children:t})}},{key:"renderLeftBottomRightCells",value:function(){var t=this,e=[],n={W:"player-territory left-territory",S:"player-territory bottom-territory",E:"player-territory right-territory"},a={W:{transform:"rotate(-90deg)"},E:{transform:"rotate(90deg)"}};return["W","S","E"].forEach((function(c){var s,r=[];s="W"===c?k.e[t.state.ownColor]:"E"===c?k.c[t.state.ownColor]:t.state.ownColor;for(var i=0;i<6;i++)for(var o=0;o<5;o++){var l="".concat(s).concat(i).concat(o),d=t.createRenderedCell(l,{style:a[c]});r.push(d)}e.push(Object(O.jsx)("div",{className:n[c],children:r}))})),e}},{key:"renderCenterCells",value:function(){for(var t=[],e=k.b[this.state.ownColor],n=0;n<9;n++){var a=e[n],c=this.createRenderedCell(a);if(t.push(c),2===n||5===n)for(var s=0;s<5;s++)t.push(Object(O.jsx)("div",{},"blank".concat(a).concat(s)));else 8!==n&&t.push(Object(O.jsx)("div",{},"blank".concat(a)))}return Object(O.jsx)("div",{className:"center-territory",children:t})}},{key:"createLineBetweenCells",value:function(t,e,n,a,c){var s=this.board.getBoundingClientRect(),r=document.getElementById(e),i=document.getElementById(n),o=r.getBoundingClientRect(),l=i.getBoundingClientRect(),d=(o.left+o.right)/2-s.left,u=(o.top+o.bottom)/2-s.top,h=(l.left+l.right)/2-s.left,b=(l.top+l.bottom)/2-s.top;a?(t.beginPath(),t.strokeStyle=p,t.lineWidth=s.width/c*10,t.setLineDash([]),t.moveTo(d,u),t.lineTo(h,b),t.stroke(),t.beginPath(),t.strokeStyle=y,t.lineWidth=s.width/c*5,t.setLineDash([2,2]),t.moveTo(d,u),t.lineTo(h,b),t.stroke()):(t.beginPath(),t.strokeStyle="rgb(144,180,104)",t.lineWidth=s.width/c*3,t.setLineDash([]),t.moveTo(d,u),t.lineTo(h,b),t.stroke())}},{key:"createArcRail",value:function(t,e,n){var a=this.board.getBoundingClientRect(),c=document.getElementById(e),s=document.getElementById(n),r=c.getBoundingClientRect(),i=s.getBoundingClientRect(),o=(r.left+r.right)/2-a.left,l=(r.top+r.bottom)/2-a.top,d=(i.left+i.right)/2-a.left,u=(i.top+i.bottom)/2-a.top;t.beginPath(),t.strokeStyle=p,t.lineWidth=a.width/C*10,t.setLineDash([]),t.moveTo(o,l),t.arcTo(o,u,d,u,a.width/C*60),t.stroke(),t.beginPath(),t.strokeStyle=y,t.lineWidth=a.width/C*5,t.setLineDash([2,2]),t.moveTo(o,l),t.arcTo(o,u,d,u,a.width/C*60),t.stroke()}},{key:"drawMovePath",value:function(t){if(t){var e=this.board.getBoundingClientRect(),n=this.arrowCanvas.getContext("2d");this.arrowCanvas.style.width="100%",this.arrowCanvas.style.height="100%",this.arrowCanvas.width=this.arrowCanvas.offsetWidth,this.arrowCanvas.height=this.arrowCanvas.offsetHeight,n.clearRect(0,0,this.arrowCanvas.width,this.arrowCanvas.height);for(var a=0;a<t.length-1;a++){var c=t[a],s=t[a+1],r=document.getElementById(c),i=document.getElementById(s),o=r.getBoundingClientRect(),l=i.getBoundingClientRect(),d=(o.left+o.right)/2-e.left,u=(o.top+o.bottom)/2-e.top,h=(l.left+l.right)/2-e.left,b=(l.top+l.bottom)/2-e.top,v=e.width/C*10,f=void 0,j=void 0,m=v*Math.cos(45)/2,k=d-(h-d),O=u-(b-u),p=d,y=u;Math.abs(p-k)>1&&(p+=h>d?m:-m),Math.abs(y-O)>1&&(y+=b>u?m:-m);var x=180*Math.atan2(O-y,k-p)/Math.PI,g=(x+45)*Math.PI/180,M=(x-45)*Math.PI/180,w=v*Math.cos(g),S=v*Math.sin(g),I=v*Math.cos(M),E=v*Math.sin(M);n.beginPath(),f=p+w,j=y+S,n.moveTo(f,j),n.lineTo(p,y),f=p+I,j=y+E,n.lineTo(f,j),n.lineWidth=e.width/C*4,n.strokeStyle="rgb(208,180,24)",n.stroke()}}}},{key:"drawRoads",value:function(){var t=this;this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.width=this.canvas.offsetWidth,this.canvas.height=this.canvas.offsetHeight;for(var e=this.canvas.getContext("2d"),n=new Set,a=new Set,c=this.state.ownColor,s=k.e[c],r=k.c[c],i=k.d[c],o=["".concat(c,"00"),"".concat(i,"04"),"".concat(i,"00"),"".concat(c,"04")],l=["".concat(s,"04"),"".concat(s,"00"),"".concat(r,"04"),"".concat(r,"00")],d=0;d<4;d++){var u=o[d],h=l[d];a.add("".concat(u).concat(h)),a.add("".concat(h).concat(u)),this.createArcRail(e,u,h)}var b=function(c){Object(k.h)(c).forEach((function(s){if(!a.has("".concat(c).concat(s))&&!n.has("".concat(s).concat(c))){var r=Object(k.i)(c).isOnRailroad&&Object(k.i)(s).isOnRailroad;t.createLineBetweenCells(e,c,s,r,C),n.add("".concat(c).concat(s))}}))};for(var v in this.state.boardStates)b(v);this.setState({roadsDrawn:!0})}},{key:"componentDidUpdate",value:function(t,e){this.state.roadsDrawn||this.drawRoads(),this.state.isConnected&&e.lastMovePath!==this.state.lastMovePath&&this.drawMovePath(this.state.lastMovePath);var n=this.state.markMenuCellId;if(null==n||this.hasMarkMenu(n)&&this.state.boardStates[n]===e.boardStates[n]||this.setState({markMenuCellId:null}),null!=this.state.winners&&null==e.winner){this.state.winners.length?alert(this.state.winners.includes(this.state.ownColor)?"you win :V":"you lose :v"):alert("draw"),this.state.ws.close();var a=[k.f.ORANGE,k.f.BLUE,k.f.GREEN,k.f.PURPLE][Math.floor(4*Math.random())],c=Object(k.g)(Object(s.a)({},a,this.state.formation));this.arrowCanvas.getContext("2d").clearRect(0,0,this.arrowCanvas.width,this.arrowCanvas.height),this.setState({boardStates:c,playerId:null,ownColor:a,currentTurnColor:null,lastMovePath:[],roadsDrawn:!1,selectedCellId:null,isConnected:!1,moveHistoryIdx:-1,moveHistory:[],markStates:{},markMenuCellId:null,ws:null,winners:null})}}},{key:"componentDidMount",value:function(){this.drawRoads(),this.board.addEventListener("contextmenu",(function(t){return t.preventDefault()}))}},{key:"joinGame",value:function(t){var e=this;fetch("https://junqi-server.herokuapp.com/connect",{method:"POST",credentials:"include"}).then((function(t){return t.json()})).then((function(n){for(var a=n.playerId,s=new WebSocket("wss://junqi-server.herokuapp.com"),r=[],i=0;i<6;i++)for(var o=0;o<5;o++){var l=e.state.boardStates["".concat(e.state.ownColor).concat(i).concat(o)];l&&r.push(Object(k.l)(l))}e.setState({formation:r}),s.onopen=function(e){s.send(JSON.stringify({type:"join",data:{gameType:t,formation:r}}))},s.onmessage=function(t){var n=JSON.parse(t.data),r=n.type,i=n.data;if("gamestate"===r){var o=e.getMovePath(i.boardStates,i.moveHistory[i.moveHistory.length-1]),l=e.getMarkStatesAfterMove(i.moveHistory[i.moveHistory.length-1],!1);e.setState({playerId:a,boardStates:i.boardStates,ownColor:i.playerColors[a],currentTurnColor:i.currentTurnColor,lastMovePath:o,isConnected:!0,roadsDrawn:!1,selectedCellId:null,moveHistoryIdx:i.moveHistory.length-1,moveHistory:i.moveHistory,markStates:Object(c.a)(Object(c.a)({},e.state.markStates),l),ws:s,winners:i.gameResult.isFinished?i.gameResult.winners:null})}else"invalidmove"===r&&console.log("invalid move")},e.setState({ws:s})}))}},{key:"surrender",value:function(){this.state.ws.send(JSON.stringify({type:"surrender"}))}},{key:"prevClicked",value:function(){if(this.state.moveHistoryIdx>-1){var t,e=this.state.moveHistory[this.state.moveHistoryIdx],n=e.srcCellId,a=e.destCellId,r=e.srcCellBefore,i=e.destCellBefore,o=this.state.moveHistoryIdx-1,l=Object(c.a)(Object(c.a)({},this.state.boardStates),{},(t={},Object(s.a)(t,n,r),Object(s.a)(t,a,i),t)),d=o>=0?this.getMovePath(l,this.state.moveHistory[o]):[],u=this.getMarkStatesAfterMove(this.state.moveHistory[this.state.moveHistoryIdx],!0);this.setState({moveHistoryIdx:o,boardStates:l,selectedCellId:null,lastMovePath:d,markStates:Object(c.a)(Object(c.a)({},this.state.markStates),u)})}}},{key:"nextClicked",value:function(){if(this.state.moveHistoryIdx<this.state.moveHistory.length-1){var t,e=this.state.moveHistoryIdx+1,n=this.state.moveHistory[e],a=n.srcCellId,r=n.destCellId,i=n.srcCellAfter,o=n.destCellAfter,l=Object(c.a)(Object(c.a)({},this.state.boardStates),{},(t={},Object(s.a)(t,a,i),Object(s.a)(t,r,o),t)),d=this.getMovePath(l,this.state.moveHistory[e]),u=this.getMarkStatesAfterMove(this.state.moveHistory[e],!1);this.setState({moveHistoryIdx:e,boardStates:l,selectedCellId:null,lastMovePath:d,markStates:Object(c.a)(Object(c.a)({},this.state.markStates),u)})}}},{key:"backToBeginningClicked",value:function(){if(this.state.moveHistoryIdx>-1){for(var t=Object(c.a)({},this.state.boardStates),e=Object(c.a)({},this.state.markStates),n=this.state.moveHistoryIdx;n>=0;n--){var a=this.state.moveHistory[n],s=a.srcCellId,r=a.destCellId,i=a.srcCellBefore,o=a.destCellBefore,l=a.destCellAfter;t[s]=i,t[r]=o,e[s]=o===l?null:null!=l?e[r]:null,e[r]=o===l?e[r]:null}this.setState({moveHistoryIdx:-1,boardStates:t,selectedCellId:null,lastMovePath:[],markStates:e})}}},{key:"backToCurrentGameClicked",value:function(){if(this.state.moveHistoryIdx<this.state.moveHistory.length-1){for(var t=Object(c.a)({},this.state.boardStates),e=Object(c.a)({},this.state.markStates),n=this.state.moveHistoryIdx+1;n<this.state.moveHistory.length;n++){var a=this.state.moveHistory[n],s=a.srcCellId,r=a.destCellId,i=a.srcCellAfter,o=a.destCellBefore,l=a.destCellAfter;t[s]=i,t[r]=l,e[r]=o===l?e[r]:null!=l?e[s]:null,e[s]=null}var d=this.getMovePath(t,this.state.moveHistory[this.state.moveHistory.length-1]);this.setState({moveHistoryIdx:this.state.moveHistory.length-1,boardStates:t,selectedCellId:null,lastMovePath:d,markStates:e})}}},{key:"render",value:function(){var t=this,e=this.renderTopCells(),n=this.renderLeftBottomRightCells(),c=Object(a.a)(n,3),s=c[0],r=c[1],i=c[2],o=this.renderCenterCells();return Object(O.jsxs)("div",{className:"board-container",children:[Object(O.jsxs)("div",{className:"board",ref:this.setBoardRef,children:[Object(O.jsx)("div",{className:"top-container",children:e}),Object(O.jsxs)("div",{className:"middle-container",children:[s,o,i]}),Object(O.jsx)("div",{className:"bottom-container",children:r}),Object(O.jsx)("canvas",{ref:this.setCanvasRef,style:{position:"absolute",top:0,left:0,pointerEvents:"none"}}),Object(O.jsx)("canvas",{ref:this.setArrowCanvasRef,style:{position:"absolute",top:0,left:0,zIndex:2,pointerEvents:"none"}})]}),Object(O.jsx)("div",{className:"button-container",children:this.state.isConnected?Object(O.jsxs)(u.Fragment,{children:[Object(O.jsxs)("div",{className:"move-num-div",children:[this.state.moveHistoryIdx!==this.state.moveHistory.length-1&&"*","Move Number: ",this.state.moveHistoryIdx+1]}),this.state.currentTurnColor===this.state.ownColor&&Object(O.jsxs)(u.Fragment,{children:[Object(O.jsxs)("div",{className:"moves-button-container",children:[Object(O.jsx)("button",{onClick:this.backToBeginningClicked,disabled:-1===this.state.moveHistoryIdx,children:"<<"}),Object(O.jsx)("button",{onClick:this.prevClicked,disabled:-1===this.state.moveHistoryIdx,children:"<"}),Object(O.jsx)("button",{onClick:this.nextClicked,disabled:this.state.moveHistoryIdx===this.state.moveHistory.length-1,children:">"}),Object(O.jsx)("button",{onClick:this.backToCurrentGameClicked,disabled:this.state.moveHistoryIdx===this.state.moveHistory.length-1,children:">>"})]}),Object(O.jsx)("button",{onClick:this.surrender,children:"Surrender"})]})]}):Object(O.jsxs)(u.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return t.joinGame("normal")},children:"Four player game"}),Object(O.jsx)("button",{onClick:function(){return t.joinGame("onevsai")},children:"Single player game"}),Object(O.jsx)("button",{onClick:function(){return t.joinGame("twoplayer")},children:"Two player game"})]})}),Object(O.jsx)(v.a,{}),Object(O.jsx)("div",{ref:this.setMarkMenuRef,className:"mark-menu-container",children:null!=this.state.markMenuCellId&&Object(O.jsx)(j.a,{onClickAway:this.closeMarkMenu,mouseEvent:"onMouseDown",children:Object(O.jsx)(f.a,{className:"mark-menu",markClicked:this.markClicked,closeMarkMenu:this.closeMarkMenu})})})]})}}]),h}(h.a.Component)}).call(this,n(29).setImmediate)},function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var a=n(6),c=n(7),s=n(5),r=n(9),i=n(8),o=n(3),l=n.n(o),d=(n(33),n(19),n(15),n(2)),u=n(0),h=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(t){var c;return Object(a.a)(this,n),(c=e.call(this,t)).state={isMarkerMenuOpen:!1},c.pieceRef=null,c.setPieceRef=function(t){return c.pieceRef=t},c.openMarkMenu=c.openMarkMenu.bind(Object(s.a)(c)),c}return Object(c.a)(n,[{key:"openMarkMenu",value:function(t){3===t.which&&this.props.openMarkMenu(this.props.cellId)}},{key:"componentDidMount",value:function(){this.pieceRef.addEventListener("mousedown",this.openMarkMenu)}},{key:"componentWillUnmount",value:function(){this.pieceRef.removeEventListener("mousedown",this.openMarkMenu)}},{key:"render",value:function(){var t,e=this,n=this.props,a=n.cellId,c=n.isCellClickable,s="rgb(39 57 25)",r="cell-svg",i=Object(d.j)(a);"normal"===i?t=Object(u.jsx)("rect",{width:"100%",height:"100%",rx:"4px",ry:"4px",strokeWidth:"4px",fill:s,stroke:"rgb(104,144,176)"}):"camp"===i?t=Object(u.jsx)("circle",{r:"60%",cx:"50%",cy:"50%",strokeWidth:"4px",fill:s,stroke:"rgb(192,144,88)"}):"base"===i?t=Object(u.jsx)("circle",{r:"40%",cx:"50%",cy:"50%",strokeWidth:"4px",fill:s,stroke:"rgb(144,180,104)"}):"center"===i&&(t=Object(u.jsx)("rect",{width:"100%",height:"100%",rx:"4px",ry:"4px",strokeWidth:"4px",fill:s,stroke:"rgb(104,144,176)"}),r+=" center-svg");var o="cell-container";return c&&(o+=" clickable"),Object(u.jsxs)("div",{ref:this.setPieceRef,className:o,onClick:function(){return e.props.cellClicked(a)},children:[this.props.children,Object(u.jsx)("svg",{id:a,className:r,children:t})]})}}]),n}(l.a.PureComponent)},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var a=n(6),c=n(7),s=n(9),r=n(8),i=n(3),o=n.n(i),l=(n(35),n(0)),d=function(t){Object(s.a)(n,t);var e=Object(r.a)(n);function n(t){var c;return Object(a.a)(this,n),(c=e.call(this,t)).state={ruleTabIdx:0},c}return Object(c.a)(n,[{key:"tabClicked",value:function(t){this.setState({ruleTabIdx:t})}},{key:"render",value:function(){var t=this;return Object(l.jsxs)("div",{className:"rules",children:["Rules:",Object(l.jsxs)("div",{className:"tabs-container",children:[Object(l.jsx)("div",{className:0===this.state.ruleTabIdx?"tab tab-selected":"tab",onClick:function(){return t.tabClicked(0)},children:"General"}),Object(l.jsx)("div",{className:1===this.state.ruleTabIdx?"tab tab-selected":"tab",onClick:function(){return t.tabClicked(1)},children:"Board"}),Object(l.jsx)("div",{className:2===this.state.ruleTabIdx?"tab tab-selected":"tab",onClick:function(){return t.tabClicked(2)},children:"Pieces"})]}),0===this.state.ruleTabIdx&&Object(l.jsx)("div",{className:"tab-panel",children:Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{children:"Two players opposite to each other are on the same team"}),Object(l.jsx)("li",{children:"Goal is to capture both opponents' \ud83d\udea9s or all their pieces"}),Object(l.jsx)("li",{children:"Players take turns moving one of their pieces in counterclockwise order"}),Object(l.jsx)("li",{children:"A piece can be moved to an empty cell or one containing an opponent's piece (attack)"})]})}),1===this.state.ruleTabIdx&&Object(l.jsx)("div",{className:"tab-panel",children:Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{children:"Posts: Blue rectangular cells. Normal spaces"}),Object(l.jsx)("li",{children:"Roads: Thin green lines. A piece can move one space across a road at a time."}),Object(l.jsx)("li",{children:"Railroads: Thick Blue/white lines. A piece can move any number of cells along a straight line if the path is clear"}),Object(l.jsx)("li",{children:"Camps: Orange circles. Prevents any pieces placed within them from being attacked"}),Object(l.jsx)("li",{children:"Bases: Green circles. Pieces placed within them cannot move, the \ud83d\udea9 must be placed in one of these cells"})]})}),2===this.state.ruleTabIdx&&Object(l.jsx)("div",{className:"tab-panel",children:Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{children:"During an attack the piece with higher rank survives while the other dies, larger number indicates higher rank"}),Object(l.jsxs)("li",{children:["Special pieces:",Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{children:"\ud83d\udca3: Explode when attacking or attacked, always eliminating both pieces. They cannot be placed on the first row"}),Object(l.jsx)("li",{children:"Mines: Cannot move but can only be eliminated by 1 or exploded by \ud83d\udca3. Any other pieces attacking the mine will die. Mines can only be placed in the last two rows"}),Object(l.jsx)("li",{children:"1: The only piece that survives when attacking a mine and is allowed to turn on the railroad"}),Object(l.jsx)("li",{children:"\ud83d\udea9: When captured eliminates the player, removing all their pieces. When 9 dies, \ud83d\udea9 becomes visible to other players"})]})]})]})})]})}}]),n}(o.a.PureComponent)},function(t,e,n){"use strict";var a=n(4),c=n(6),s=n(7),r=n(5),i=n(9),o=n(8),l=n(3),d=n.n(l),u=(n(36),n(0)),h=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).markClicked.bind(Object(r.a)(a)),a.contextMenu=a.contextMenu.bind(Object(r.a)(a)),a}return Object(s.a)(n,[{key:"markClicked",value:function(t){this.props.markClicked(t)}},{key:"contextMenu",value:function(t){t.preventDefault()}},{key:"render",value:function(){var t=this,e=this.props.forwardedRef;return Object(u.jsxs)("div",{onContextMenu:this.contextMenu,ref:e,className:"mark-menu-outer",children:[Object(u.jsx)("button",{className:"close-button",onClick:this.props.closeMarkMenu,children:"x"}),Object(u.jsxs)("div",{className:"mark-menu",children:[Object(u.jsx)("div",{className:"mark-menu-item",onClick:function(){return t.markClicked("9")},children:"9"}),Object(u.jsx)("div",{className:"mark-menu-item",onClick:function(){return t.markClicked("8")},children:"8"}),Object(u.jsx)("div",{className:"mark-menu-item",onClick:function(){return t.markClicked("7")},children:"7"}),Object(u.jsx)("div",{className:"mark-menu-item",onClick:function(){return t.markClicked("6")},children:"6"}),Object(u.jsx)("div",{className:"mark-menu-item",onClick:function(){return t.markClicked("5")},children:"5"}),Object(u.jsx)("div",{className:"mark-menu-item",onClick:function(){return t.markClicked("4")},children:"4"}),Object(u.jsx)("div",{className:"mark-menu-item",onClick:function(){return t.markClicked("3")},children:"3"}),Object(u.jsx)("div",{className:"mark-menu-item",onClick:function(){return t.markClicked("2")},children:"2"}),Object(u.jsx)("div",{className:"mark-menu-item",onClick:function(){return t.markClicked("1")},children:"1"}),Object(u.jsx)("div",{className:"mark-menu-item",onClick:function(){return t.markClicked("\ud83d\udea9")},children:"\ud83d\udea9"}),Object(u.jsx)("div",{className:"mark-menu-item",onClick:function(){return t.markClicked("\ud83d\udca3")},children:"\ud83d\udca3"}),Object(u.jsx)("div",{className:"mark-menu-item",onClick:function(){return t.markClicked("M")},children:"M"})]}),Object(u.jsx)("button",{className:"mark-menu-clear",onClick:function(){return t.markClicked("")},children:"Clear"})]})}}]),n}(d.a.PureComponent);e.a=d.a.forwardRef((function(t,e){return Object(u.jsx)(h,Object(a.a)(Object(a.a)({},t),{},{forwardedRef:e}))}))},,,,,function(t,e,n){},,,,function(t,e,n){},function(t,e,n){},,function(t,e,n){},function(t,e,n){},,,,function(t,e,n){"use strict";n.r(e);var a=n(3),c=n.n(a),s=n(12),r=n.n(s),i=(n(28),n(20)),o=n(0);var l=function(){return Object(o.jsx)(i.a,{})},d=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,44)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,s=e.getLCP,r=e.getTTFB;n(t),a(t),c(t),s(t),r(t)}))};r.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(l,{})}),document.getElementById("root")),d()}],[[40,1,2]]]);